<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í™˜ìœ¨ê³„ì‚° ì„¤ì •</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      margin: 0; padding: 20px;
    }
    h2 {
      font-size: 20px;
      margin-bottom: 20px;
    }
    select {
      width: 100%;
      font-size: 16px;
      padding: 8px;
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }
    .row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .row img {
      width: 24px;
      height: 18px;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 16px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 10px 5px 0 0;
    }
  </style>
</head>
<body>
  <h2 onclick="location.href='index.html'" style="cursor:pointer">â† ë’¤ë¡œ</h2>

  <div class="row">
    <label>â‘  ê¸°ë³¸ í†µí™”</label>
  </div>
  <div class="row">
    <img id="flag1" src="https://flagcdn.com/us.svg" />
    <select id="baseCurrency"></select>
  </div>

  <div class="row">
    <label>â‘¡ ëª©ì  í†µí™”</label>
  </div>
  <div class="row">
    <img id="flag2" src="https://flagcdn.com/kr.svg" />
    <select id="targetCurrency"></select>
  </div>

  <div class="row">
    <label>â‘¢ í…Œë§ˆ ì„ íƒ</label>
    <select id="theme">
      <option value="">ê¸°ë³¸</option>
      <option value="dark">ë‹¤í¬</option>
      <option value="pastel">íŒŒìŠ¤í…”</option>
      <option value="mono">ëª¨ë…¸</option>
    </select>
  </div>

  <div class="row">
    <label id="rateLabel">â‘£ ì§ì ‘ í™˜ìœ¨ ì…ë ¥ (1 USD â†’ KRW)</label>
  </div>
  <input type="text" id="customRate" placeholder="ì˜ˆ) 1432" />

  <div>
    <button onclick="save()">ì €ì¥</button>
    <button onclick="reset()">ì´ˆê¸°í™”</button>
  </div>

  <script>
    const currencies = {
      KRW: "ğŸ‡°ğŸ‡·",
      USD: "ğŸ‡ºğŸ‡¸",
      EUR: "ğŸ‡ªğŸ‡º",
      JPY: "ğŸ‡¯ğŸ‡µ",
      CNY: "ğŸ‡¨ğŸ‡³",
      VND: "ğŸ‡»ğŸ‡³",
      THB: "ğŸ‡¹ğŸ‡­",
      PHP: "ğŸ‡µğŸ‡­",
      RUB: "ğŸ‡·ğŸ‡º",
      HKD: "ğŸ‡­ğŸ‡°",
    };

    const baseSelect = document.getElementById("baseCurrency");
    const targetSelect = document.getElementById("targetCurrency");
    const themeSelect = document.getElementById("theme");
    const flag1 = document.getElementById("flag1");
    const flag2 = document.getElementById("flag2");
    const rateLabel = document.getElementById("rateLabel");
    const customRateInput = document.getElementById("customRate");

    for (const code in currencies) {
      const option1 = new Option(code, code);
      const option2 = new Option(code, code);
      baseSelect.add(option1);
      targetSelect.add(option2);
    }

    function updateFlagsAndLabel() {
      flag1.src = `https://flagcdn.com/${baseSelect.value.slice(0, 2).toLowerCase()}.svg`;
      flag2.src = `https://flagcdn.com/${targetSelect.value.slice(0, 2).toLowerCase()}.svg`;
      rateLabel.innerText = `â‘£ ì§ì ‘ í™˜ìœ¨ ì…ë ¥ (1 ${baseSelect.value} â†’ ${targetSelect.value})`;
    }

    function save() {
      localStorage.setItem("base", baseSelect.value);
      localStorage.setItem("target", targetSelect.value);
      localStorage.setItem("theme", themeSelect.value);
      localStorage.setItem("customRate", customRateInput.value);
      alert("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    function reset() {
      localStorage.removeItem("base");
      localStorage.removeItem("target");
      localStorage.removeItem("theme");
      localStorage.removeItem("customRate");
      location.reload();
    }

    function load() {
      baseSelect.value = localStorage.getItem("base") || "USD";
      targetSelect.value = localStorage.getItem("target") || "KRW";
      themeSelect.value = localStorage.getItem("theme") || "";
      customRateInput.value = localStorage.getItem("customRate") || "";
      updateFlagsAndLabel();
    }

    baseSelect.addEventListener("change", updateFlagsAndLabel);
    targetSelect.addEventListener("change", updateFlagsAndLabel);

    window.addEventListener("load", load);
    window.addEventListener("popstate", () => {
      location.href = "index.html";
    });
    history.pushState(null, null, location.href);
  </script>
</body>
</html>
