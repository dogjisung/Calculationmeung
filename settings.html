<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>í™˜ìœ¨ê³„ì‚° ì„¤ì •</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      margin: 0; padding: 20px;
      background: #fdfdfd; color: #111;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: bold;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 16px;
    }
    button {
      padding: 10px 16px;
      font-size: 16px;
      margin-right: 10px;
    }
    .top-bar {
      display: flex; align-items: center;
      font-size: 20px; font-weight: bold;
      margin-bottom: 20px;
    }
    .top-bar span {
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <span onclick="history.back()">â†</span>
    í™˜ìœ¨ê³„ì‚° ì„¤ì •
  </div>

  <label for="baseCurrency">â‘  ê¸°ë³¸ í†µí™”</label>
  <select id="baseCurrency"></select>

  <label for="targetCurrency">â‘¡ ëª©ì  í†µí™”</label>
  <select id="targetCurrency"></select>

  <label for="themeSelect">â‘¢ í…Œë§ˆ ì„ íƒ</label>
  <select id="themeSelect">
    <option value="">ê¸°ë³¸</option>
    <option value="dark">ë‹¤í¬</option>
    <option value="pastel">íŒŒìŠ¤í…”</option>
    <option value="mono">ëª¨ë…¸</option>
  </select>

  <label for="customRate">â‘£ ì§ì ‘ í™˜ìœ¨ ì…ë ¥ (1 USD â†’ KRW)</label>
  <input id="customRate" type="number" placeholder="ì˜ˆ) 1422" />

  <div>
    <button onclick="saveSettings()">ì €ì¥</button>
    <button onclick="resetSettings()">ì´ˆê¸°í™”</button>
  </div>

  <script>
    const FLAGS = {
      KRW:'ğŸ‡°ğŸ‡·', USD:'ğŸ‡ºğŸ‡¸', EUR:'ğŸ‡ªğŸ‡º', JPY:'ğŸ‡¯ğŸ‡µ',
      CNY:'ğŸ‡¨ğŸ‡³', VND:'ğŸ‡»ğŸ‡³', THB:'ğŸ‡¹ğŸ‡­', PHP:'ğŸ‡µğŸ‡­',
      RUB:'ğŸ‡·ğŸ‡º', HKD:'ğŸ‡­ğŸ‡°'
    };
    const codes = Object.keys(FLAGS);
    const baseSel = document.getElementById('baseCurrency');
    const targetSel = document.getElementById('targetCurrency');
    const themeSel = document.getElementById('themeSelect');
    const rateInput = document.getElementById('customRate');

    function makeOptions(select, selected) {
      codes.forEach(code => {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = `${FLAGS[code]} ${code}`;
        if (code === selected) opt.selected = true;
        select.appendChild(opt);
      });
    }

    function loadSettings() {
      const base = localStorage.getItem('base') || 'USD';
      const target = localStorage.getItem('target') || 'KRW';
      const theme = localStorage.getItem('theme') || '';
      const rate = localStorage.getItem('customRate') || '';

      makeOptions(baseSel, base);
      makeOptions(targetSel, target);
      themeSel.value = theme;
      rateInput.value = rate;
    }

    function saveSettings() {
      localStorage.setItem('base', baseSel.value);
      localStorage.setItem('target', targetSel.value);
      localStorage.setItem('theme', themeSel.value);
      if (rateInput.value) {
        localStorage.setItem('customRate', rateInput.value);
      } else {
        localStorage.removeItem('customRate');
      }
      alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
      history.back();
    }

    function resetSettings() {
      localStorage.removeItem('base');
      localStorage.removeItem('target');
      localStorage.removeItem('theme');
      localStorage.removeItem('customRate');
      alert('ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
      location.reload();
    }

    loadSettings();
  </script>
</body>
</html>
