<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>í™˜ìœ¨ê³„ì‚° ì„¤ì •</title>
  <style>
    body {
      margin:0; padding:16px;
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto;
      background:#f9f9f9; color:#222;
    }
    .back {
      cursor:pointer; font-size:24px; display:inline-block;
      margin-bottom:24px;
    }
    .section { margin-bottom:32px; }
    .section h2 {
      margin:0 0 8px; font-size:18px;
    }
    .list {
      list-style:none; padding:0; margin:0;
      border:1px solid #ddd; border-radius:8px;
      background:#fff;
    }
    .list li {
      display:flex; align-items:center;
      padding:12px 16px; cursor:pointer;
      border-bottom:1px solid #eee;
    }
    .list li:last-child { border-bottom:none; }
    .list li .flag { font-size:24px; width:32px; }
    .list li .code { flex:1; margin-left:8px; }
    .list li .radio {
      width:20px; height:20px; border:1px solid #888;
      border-radius:50%; margin-left:12px;
      position:relative;
    }
    .list li.selected .radio::before {
      content:'';
      position:absolute; top:4px; left:4px;
      width:8px; height:8px;
      border-radius:50%; background:#2196f3;
    }
    .controls {
      text-align:right;
    }
    .controls button {
      padding:8px 16px; margin-left:8px;
      font-size:16px; cursor:pointer;
    }
  </style>
</head>
<body>
  <div class="back" onclick="history.back()">â† ë’¤ë¡œ</div>

  <div class="section">
    <h2>â‘  ê¸°ë³¸ í†µí™” ì„¤ì •</h2>
    <ul id="baseList" class="list"></ul>
  </div>
  <div class="section">
    <h2>â‘¡ ëª©ì  í†µí™” ì„¤ì •</h2>
    <ul id="tgtList" class="list"></ul>
  </div>
  <div class="section">
    <h2>â‘¢ í…Œë§ˆ ì„ íƒ</h2>
    <ul id="themeList" class="list">
      <li data-theme=""   class=""><span class="code">ê¸°ë³¸</span><div class="radio"></div></li>
      <li data-theme="dark" class=""><span class="code">ë‹¤í¬</span><div class="radio"></div></li>
      <li data-theme="pastel" class=""><span class="code">íŒŒìŠ¤í…”</span><div class="radio"></div></li>
      <li data-theme="mono"   class=""><span class="code">ëª¨ë…¸</span><div class="radio"></div></li>
    </ul>
  </div>
  <div class="controls">
    <button id="saveBtn">ì €ì¥</button>
    <button id="cancelBtn" onclick="history.back()">ì·¨ì†Œ</button>
  </div>

  <script>
    const FLAGS = {
      KRW:'ğŸ‡°ğŸ‡·', USD:'ğŸ‡ºğŸ‡¸', EUR:'ğŸ‡ªğŸ‡º', JPY:'ğŸ‡¯ğŸ‡µ',
      CNY:'ğŸ‡¨ğŸ‡³', VND:'ğŸ‡»ğŸ‡³', THB:'ğŸ‡¹ğŸ‡­', PHP:'ğŸ‡µğŸ‡­',
      RUB:'ğŸ‡·ğŸ‡º', HKD:'ğŸ‡­ğŸ‡°'
    };
    const CODES = Object.keys(FLAGS);
    const baseList = document.getElementById('baseList'),
          tgtList  = document.getElementById('tgtList'),
          themeList= document.getElementById('themeList'),
          saveBtn  = document.getElementById('saveBtn');

    const STORAGE = {
      base: localStorage.getItem('base')   || 'USD',
      target:localStorage.getItem('target')|| 'KRW',
      theme: localStorage.getItem('theme') || ''
    };

    function makeList(container, key){
      CODES.forEach(code=>{
        const li = document.createElement('li');
        li.dataset.code = code;
        li.innerHTML = `<span class="flag">${FLAGS[code]}</span>
                        <span class="code">${code}</span>
                        <div class="radio"></div>`;
        li.addEventListener('click',()=>{
          // ì„ íƒí‘œì‹œ
          container.querySelectorAll('li').forEach(x=>x.classList.remove('selected'));
          li.classList.add('selected');
        });
        container.appendChild(li);
      });
      // ì´ˆê¸° ì„ íƒ
      container.querySelector(`li[data-code="${STORAGE[key]}"]`)
               .classList.add('selected');
    }

    // í…Œë§ˆ ë¦¬ìŠ¤íŠ¸ ì„ íƒ ì²˜ë¦¬
    themeList.querySelectorAll('li').forEach(li=>{
      if(li.dataset.theme===STORAGE.theme) li.classList.add('selected');
      li.addEventListener('click',()=>{
        themeList.querySelectorAll('li').forEach(x=>x.classList.remove('selected'));
        li.classList.add('selected');
      });
    });

    // ê¸°ë³¸/ëª©ì  ë¦¬ìŠ¤íŠ¸ ìƒì„±
    makeList(baseList, 'base');
    makeList(tgtList,  'target');

    saveBtn.addEventListener('click',()=>{
      const selBase = baseList.querySelector('li.selected').dataset.code;
      const selTgt  = tgtList.querySelector('li.selected').dataset.code;
      const selTheme= themeList.querySelector('li.selected').dataset.theme;
      localStorage.setItem('base', selBase);
      localStorage.setItem('target', selTgt);
      localStorage.setItem('theme', selTheme);
      alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
      history.back();
    });
  </script>
</body>
</html>
