<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>í™˜ìœ¨ê³„ì‚° ì„¤ì •</title>
  <style>
    html, body {
      margin:0; padding:0;
      width:100vw; height:100vh;
      font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      background:#fff; color:#000;
    }
    .container {
      max-width:360px; margin:0 auto; padding:16px;
    }
    .header {
      display:flex; align-items:center;
    }
    .back-btn {
      font-size:24px; background:none; border:none;
      cursor:pointer; margin-right:8px;
    }
    h2 { margin:0; font-size:20px; }
    .section { margin-top:24px; }
    .section label { font-weight:600; display:block; margin-bottom:8px; }
    select, input {
      width:100%; padding:8px 12px; font-size:16px;
      border:1px solid #ccc; border-radius:4px;
    }
    .row { display:flex; gap:8px; margin-top:12px; }
    .row button {
      flex:1; padding:10px; font-size:16px;
      border:none; border-radius:4px; cursor:pointer;
      background:#eee;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <button class="back-btn" onclick="history.back()">â†</button>
      <h2>í™˜ìœ¨ê³„ì‚° ì„¤ì •</h2>
    </div>

    <div class="section">
      <label>â‘  ê¸°ë³¸ í†µí™” ì„¤ì •</label>
      <select id="baseSelect"></select>
    </div>

    <div class="section">
      <label>â‘¡ ëª©ì  í†µí™” ì„¤ì •</label>
      <select id="targetSelect"></select>
    </div>

    <div class="section">
      <label>â‘¢ í…Œë§ˆ ì„ íƒ</label>
      <select id="themeSelect">
        <option value="">ì‹œìŠ¤í…œ ê¸°ë³¸</option>
        <option value="dark">ë‹¤í¬</option>
        <option value="pink">í•‘í¬</option>
        <option value="blue">ë¸”ë£¨</option>
      </select>
    </div>

    <div class="section">
      <label id="customLabel">â‘£ ì§ì ‘ í™˜ìœ¨ ì…ë ¥ (1 USD â†’ KRW)</label>
      <input type="number" id="customRate" placeholder="ì˜ˆ) 1422"/>
      <div class="row">
        <button id="saveBtn">ì €ì¥</button>
        <button id="resetBtn">ì´ˆê¸°í™”</button>
      </div>
    </div>
  </div>

  <script>
    const FLAGS = {
      KRW:'ğŸ‡°ğŸ‡· ëŒ€í•œë¯¼êµ­ ì›', USD:'ğŸ‡ºğŸ‡¸ ë¯¸êµ­ ë‹¬ëŸ¬', EUR:'ğŸ‡ªğŸ‡º ìœ ë¡œ',
      JPY:'ğŸ‡¯ğŸ‡µ ì¼ë³¸ ì—”', CNY:'ğŸ‡¨ğŸ‡³ ì¤‘êµ­ ìœ„ì•ˆ', VND:'ğŸ‡»ğŸ‡³ ë² íŠ¸ë‚¨ ë™',
      THB:'ğŸ‡¹ğŸ‡­ íƒœêµ­ ë°”íŠ¸', PHP:'ğŸ‡µğŸ‡­ í•„ë¦¬í•€ í˜ì†Œ',
      RUB:'ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ ë£¨ë¸”', HKD:'ğŸ‡­ğŸ‡° í™ì½© ë‹¬ëŸ¬'
    };

    const baseSelect   = document.getElementById('baseSelect');
    const targetSelect = document.getElementById('targetSelect');
    const themeSelect  = document.getElementById('themeSelect');
    const customRate   = document.getElementById('customRate');
    const customLabel  = document.getElementById('customLabel');
    const saveBtn      = document.getElementById('saveBtn');
    const resetBtn     = document.getElementById('resetBtn');

    function populateSelect(sel, selected) {
      sel.innerHTML = '';
      for (let code in FLAGS) {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = FLAGS[code];
        if (code === selected) opt.selected = true;
        sel.appendChild(opt);
      }
    }

    function updateCustomLabel() {
      customLabel.textContent =
        `â‘£ ì§ì ‘ í™˜ìœ¨ ì…ë ¥ (1 ${baseSelect.value} â†’ ${targetSelect.value})`;
    }

    function loadSettings() {
      const base   = localStorage.getItem('base')   || 'USD';
      const target = localStorage.getItem('target') || 'KRW';
      const theme  = localStorage.getItem('theme')  || '';
      const custom = localStorage.getItem('customRate')||'';

      populateSelect(baseSelect, base);
      populateSelect(targetSelect, target);
      themeSelect.value = theme;
      customRate.value   = custom;
      updateCustomLabel();
    }

    function saveSettings() {
      localStorage.setItem('base', baseSelect.value);
      localStorage.setItem('target', targetSelect.value);
      localStorage.setItem('theme', themeSelect.value);
      localStorage.setItem('customRate', customRate.value);
      alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }

    function resetCustomRate() {
      customRate.value = '';
      localStorage.removeItem('customRate');
    }

    baseSelect.addEventListener('change', ()=> {
      localStorage.setItem('base', baseSelect.value);
      updateCustomLabel();
    });
    targetSelect.addEventListener('change', ()=> {
      localStorage.setItem('target', targetSelect.value);
      updateCustomLabel();
    });
    themeSelect.addEventListener('change', ()=> {
      localStorage.setItem('theme', themeSelect.value);
    });
    saveBtn.addEventListener('click',    saveSettings);
    resetBtn.addEventListener('click',   resetCustomRate);

    window.addEventListener('popstate', ()=> history.back());
    loadSettings();
  </script>
</body>
</html>
