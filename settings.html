<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>설정</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .section {
      margin-bottom: 30px;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 8px;
      font-size: 16px;
      margin-top: 8px;
    }
    button {
      padding: 10px 16px;
      margin-top: 10px;
      font-size: 16px;
    }
    label {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>설정</h2>

  <div class="section">
    <label>기본 통화</label>
    <select id="baseSelect"></select>
  </div>

  <div class="section">
    <label>목적 통화</label>
    <select id="targetSelect"></select>
  </div>

  <div class="section">
    <label>테마 설정</label>
    <select id="themeSelect">
      <option value="">기본</option>
      <option value="dark">다크</option>
      <option value="pastel">파스텔</option>
      <option value="mono">모노</option>
    </select>
  </div>

  <div class="section">
    <label>직접 환율 입력</label>
    <input type="number" id="customRate" step="0.0001" placeholder="직접 환율 입력" />
    <button id="saveRate">저장</button>
  </div>

  <script>
    const baseSel = document.getElementById('baseSelect');
    const targetSel = document.getElementById('targetSelect');
    const themeSel = document.getElementById('themeSelect');
    const customRateInput = document.getElementById('customRate');

    const CURRENCIES = {
      USD: '🇺🇸 미국 달러',
      KRW: '🇰🇷 한국 원',
      JPY: '🇯🇵 일본 엔',
      CNY: '🇨🇳 중국 위안',
      VND: '🇻🇳 베트남 동',
      EUR: '🇪🇺 유로',
      THB: '🇹🇭 태국 바트',
      PHP: '🇵🇭 필리핀 페소',
      RUB: '🇷🇺 러시아 루블',
      HKD: '🇭🇰 홍콩 달러'
    };

    Object.entries(CURRENCIES).forEach(([code, label]) => {
      baseSel.innerHTML += `<option value="${code}">${label}</option>`;
      targetSel.innerHTML += `<option value="${code}">${label}</option>`;
    });

    // 기존 설정 적용
    baseSel.value = localStorage.getItem('base') || 'USD';
    targetSel.value = localStorage.getItem('target') || 'KRW';
    themeSel.value = localStorage.getItem('theme') || '';
    customRateInput.value = localStorage.getItem('customRate') || '';

    baseSel.addEventListener('change', () => {
      localStorage.setItem('base', baseSel.value);
      updateRateLabel();
    });

    targetSel.addEventListener('change', () => {
      localStorage.setItem('target', targetSel.value);
      updateRateLabel();
    });

    themeSel.addEventListener('change', () => {
      localStorage.setItem('theme', themeSel.value);
    });

    document.getElementById('saveRate').addEventListener('click', () => {
      localStorage.setItem('customRate', customRateInput.value);
      alert('환율 저장 완료');
    });

    function updateRateLabel() {
      const base = baseSel.value;
      const target = targetSel.value;
      customRateInput.placeholder = `1 ${base} = ? ${target}`;
    }

    updateRateLabel();

    // Android 뒤로가기 버튼처럼 동작
    window.addEventListener('popstate', () => {
      location.href = 'index.html';
    });
  </script>
</body>
</html>
