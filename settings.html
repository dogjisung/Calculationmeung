<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>환율계산 설정</title>
  <style>
    body{margin:0;padding:16px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto;background:#f9f9f9;}
    .back{cursor:pointer;font-size:24px;margin-bottom:24px;display:inline-block;}
    .section{margin-bottom:32px;}
    label{display:block;margin-bottom:8px;font-weight:500;}
    select,input{width:100%;padding:8px;font-size:16px;box-sizing:border-box;margin-bottom:8px;}
    button{margin-right:12px;padding:8px 16px;font-size:16px;cursor:pointer;}
  </style>
</head>
<body>
  <div class="back" onclick="history.back()">← 뒤로</div>

  <div class="section">
    <label>① 기본 통화</label>
    <select id="baseSel"></select>
  </div>
  <div class="section">
    <label>② 목적 통화</label>
    <select id="tgtSel"></select>
  </div>
  <div class="section">
    <label>③ 테마 선택</label>
    <select id="themeSel">
      <option value="">기본</option>
      <option value="dark">다크</option>
      <option value="pastel">파스텔</option>
      <option value="mono">모노</option>
    </select>
  </div>
  <div class="section">
    <label>④ 직접 환율 입력 (1 USD → KRW)</label>
    <input id="customRate" type="number" step="0.000001" placeholder="예) 1422"/>
    <button id="saveRate">저장</button>
    <button id="clearRate">초기화</button>
  </div>

  <script>
    const CODES = ['KRW','USD','EUR','JPY','CNY','VND','THB','PHP','RUB','HKD'];
    const baseSel = document.getElementById('baseSel'),
          tgtSel  = document.getElementById('tgtSel'),
          themeSel= document.getElementById('themeSel'),
          customIn= document.getElementById('customRate');

    // 로컬스토리지 값
    const BASE = localStorage.getItem('base')   || 'USD';
    const TGT  = localStorage.getItem('target') || 'KRW';
    const TH   = localStorage.getItem('theme')  || '';
    const CR   = localStorage.getItem('customRate')||'';

    // 통화 목록 채우기
    CODES.forEach(c=>{
      [baseSel,tgtSel].forEach(sel=>{
        const opt = new Option(c,c);
        sel.add(opt);
      });
    });
    baseSel.value=BASE;
    tgtSel.value =TGT;
    themeSel.value=TH;
    customIn.value=CR;

    document.getElementById('saveRate').onclick = ()=>{
      localStorage.setItem('base', baseSel.value);
      localStorage.setItem('target', tgtSel.value);
      localStorage.setItem('theme', themeSel.value);
      if(customIn.value) localStorage.setItem('customRate', customIn.value);
      alert('설정이 저장되었습니다.');
      history.back();
    };
    document.getElementById('clearRate').onclick = ()=>{
      localStorage.removeItem('customRate');
      customIn.value='';
      alert('사용자 환율 설정이 초기화되었습니다.');
    };
  </script>
</body>
</html>
