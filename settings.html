<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>환율계산 설정</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      margin: 0; padding: 20px;
      background: #fdfdfd; color: #111;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: bold;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 16px;
    }
    button {
      padding: 10px 16px;
      font-size: 16px;
      margin-right: 10px;
    }
    .top-bar {
      display: flex; align-items: center;
      font-size: 20px; font-weight: bold;
      margin-bottom: 20px;
    }
    .top-bar span {
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <span onclick="history.back()">←</span>
    환율계산 설정
  </div>

  <label for="baseCurrency">① 기본 통화</label>
  <select id="baseCurrency"></select>

  <label for="targetCurrency">② 목적 통화</label>
  <select id="targetCurrency"></select>

  <label for="themeSelect">③ 테마 선택</label>
  <select id="themeSelect">
    <option value="">기본</option>
    <option value="dark">다크</option>
    <option value="pastel">파스텔</option>
    <option value="mono">모노</option>
  </select>

  <label for="customRate">④ 직접 환율 입력 (1 USD → KRW)</label>
  <input id="customRate" type="number" placeholder="예) 1422" />

  <div>
    <button onclick="saveSettings()">저장</button>
    <button onclick="resetSettings()">초기화</button>
  </div>

  <script>
    const FLAGS = {
      KRW:'🇰🇷', USD:'🇺🇸', EUR:'🇪🇺', JPY:'🇯🇵',
      CNY:'🇨🇳', VND:'🇻🇳', THB:'🇹🇭', PHP:'🇵🇭',
      RUB:'🇷🇺', HKD:'🇭🇰'
    };
    const codes = Object.keys(FLAGS);
    const baseSel = document.getElementById('baseCurrency');
    const targetSel = document.getElementById('targetCurrency');
    const themeSel = document.getElementById('themeSelect');
    const rateInput = document.getElementById('customRate');

    function makeOptions(select, selected) {
      codes.forEach(code => {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = `${FLAGS[code]} ${code}`;
        if (code === selected) opt.selected = true;
        select.appendChild(opt);
      });
    }

    function loadSettings() {
      const base = localStorage.getItem('base') || 'USD';
      const target = localStorage.getItem('target') || 'KRW';
      const theme = localStorage.getItem('theme') || '';
      const rate = localStorage.getItem('customRate') || '';

      makeOptions(baseSel, base);
      makeOptions(targetSel, target);
      themeSel.value = theme;
      rateInput.value = rate;
    }

    function saveSettings() {
      localStorage.setItem('base', baseSel.value);
      localStorage.setItem('target', targetSel.value);
      localStorage.setItem('theme', themeSel.value);
      if (rateInput.value) {
        localStorage.setItem('customRate', rateInput.value);
      } else {
        localStorage.removeItem('customRate');
      }
      alert('설정이 저장되었습니다.');
      history.back();
    }

    function resetSettings() {
      localStorage.removeItem('base');
      localStorage.removeItem('target');
      localStorage.removeItem('theme');
      localStorage.removeItem('customRate');
      alert('설정이 초기화되었습니다.');
      location.reload();
    }

    loadSettings();
  </script>
</body>
</html>
