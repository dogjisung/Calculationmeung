<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>환율계산기 설정</title>
  <style>
    html, body {
      margin:0; padding:0;
      width:100vw; height:100vh;
      font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      background:#fff; color:#000;
      box-sizing:border-box;
    }
    .container {
      padding:16px;
    }
    .back {
      font-size:24px; cursor:pointer;
      background:none; border:none;
    }
    h1 {
      display:inline-block; margin-left:8px; font-size:20px;
    }
    .item {
      margin:16px 0;
    }
    label { display:block; margin-bottom:4px; }
    select, input[type="number"] {
      width:100%; padding:8px; font-size:16px;
    }
    button {
      padding:10px 20px; margin-right:8px;
      font-size:16px; cursor:pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="back" onclick="history.back()">←</button>
    <h1>환율 계산기 설정</h1>

    <div class="item">
      <label for="base">① 기본 통화</label>
      <select id="base"></select>
    </div>
    <div class="item">
      <label for="target">② 목표 통화</label>
      <select id="target"></select>
    </div>
    <div class="item">
      <label for="theme">③ 테마 선택</label>
      <select id="theme">
        <option value="">기본</option>
        <option value="dark">다크</option>
        <option value="pastel">파스텔</option>
        <option value="mono">모노</option>
      </select>
    </div>
  </div>

  <script>
    const FLAGS = {
      KRW:'🇰🇷 대한민국 원', USD:'🇺🇸 미국 달러',
      EUR:'🇪🇺 유로', JPY:'🇯🇵 일본 엔화',
      CNY:'🇨🇳 중국 위안', VND:'🇻🇳 베트남 동',
      THB:'🇹🇭 태국 바트', PHP:'🇵🇭 필리핀 페소',
      RUB:'🇷🇺 러시아 루블', HKD:'🇭🇰 홍콩 달러'
    };

    const baseSel   = document.getElementById('base');
    const targetSel = document.getElementById('target');
    const themeSel  = document.getElementById('theme');

    // 셀렉트 박스 채우기
    Object.entries(FLAGS).forEach(([code,name])=>{
      const o1 = new Option(name, code);
      const o2 = new Option(name, code);
      baseSel.add(o1);
      targetSel.add(o2);
    });

    // 로컬 설정 불러오기
    baseSel.value   = localStorage.getItem('base')   || 'USD';
    targetSel.value = localStorage.getItem('target') || 'KRW';
    themeSel.value  = localStorage.getItem('theme')  || '';

    // 변경 즉시 저장 + storage 이벤트 발생
    baseSel.onchange = () => {
      localStorage.setItem('base', baseSel.value);
    };
    targetSel.onchange = () => {
      localStorage.setItem('target', targetSel.value);
    };
    themeSel.onchange = () => {
      localStorage.setItem('theme', themeSel.value);
    };
  </script>
</body>
</html>
